# 📚 دليل استخدام نظام إدارة المقابلات مراسي

## 🎯 نظرة عامة

نظام شامل لإدارة المقابلات والمرشحين يتضمن:
- ✅ إدارة المرشحين مع الوظيفة والملاحظات
- ✅ رفع ملفات Excel
- ✅ قاعدة بيانات محفوظة للتخزين طويل المدى
- ✅ نظام صلاحيات متعدد المستويات
- ✅ إشعارات للمرشحين المرفوضين مسبقاً

---

## 👤 أنواع المستخدمين

### 1️⃣ موظف شركة الأمن (Security Employee)
**المهام:**
- إدخال بيانات المرشحين الجدد
- رفع ملفات Excel الجماعية
- عرض المرشحين (غير قادر على اتخاذ قرارات)

**لا يمكنه:**
- ❌ اتخاذ قرارات قبول/رفض
- ❌ حذف المرشحين
- ❌ رؤية قاعدة البيانات المحفوظة

### 2️⃣ مدير المقابلات (Interview Manager)
**المهام:**
- ✅ جميع مهام موظف الأمن
- ✅ اتخاذ قرارات قبول/رفض المرشحين
- ✅ إدارة المقابلات
- ✅ عرض قاعدة البيانات المحفوظة
- ✅ حفظ القرارات النهائية

**لا يمكنه:**
- ❌ حذف المرشحين المحفوظين
- ❌ إدارة المستخدمين

### 3️⃣ مدير النظام (Admin)
**المهام:**
- ✅ جميع المهام السابقة
- ✅ إدارة المستخدمين
- ✅ إضافة/تعديل/حذف المستخدمين
- ✅ حذف المرشحين
- ✅ حذف البيانات المكررة

---

## 📝 كيفية الاستخدام

### الخطوة 1: تسجيل الدخول

استخدم أحد الحسابات التالية:

| الدور | البريد الإلكتروني | الصلاحيات |
|------|------------------|-----------|
| موظف أمن | security@company.com | إدخال المرشحين |
| مدير مقابلات | interview@company.com | اتخاذ القرارات |
| مدير النظام | admin@company.com | جميع الصلاحيات |

### الخطوة 2: إدخال مرشح جديد

#### الطريقة 1: الإدخال اليدوي
1. انتقل إلى **المرشحين**
2. اضغط **إضافة مرشح**
3. املأ البيانات:
   - الاسم
   - الرقم القومي
   - تاريخ الميلاد
   - المحافظة
   - المؤهل
   - الحالة الاجتماعية
   - اسم الشركة
   - **الوظيفة (جديد)**: اختياري
   - تاريخ العرض
   - **الملاحظات (جديد)**: اختياري
4. اضغط **حفظ**

#### الطريقة 2: رفع ملف Excel
1. انتقل إلى **رفع ملفات Excel**
2. اختر نوع البيانات:
   - مرشحين جدد (صفحة المرشحين)
   - مرشحين محفوظين (قاعدة البيانات)
3. اضغط **اختر ملف Excel**
4. راجع المعاينة
5. اضغط **رفع البيانات**

📖 **راجع دليل إعداد Excel**: `Excel_Upload_Guide.md`

### الخطوة 3: اتخاذ قرار (للمدراء فقط)

1. انتقل إلى **المرشحين**
2. اختر مرشح
3. اختر الإجراء:
   - **✅ قبول**: قبول المرشح
   - **❌ رفض**: رفض المرشح
   - **⚠️ استبعاد**: استبعاد المرشح
   - **📝 استقالة**: تسجيل استقالة المرشح
4. أدخل **الملاحظات** (اختياري)
5. اضغط **تأكيد**

### الخطوة 4: حفظ في قاعدة البيانات

- عند اتخاذ قرار نهائي (قبول/رفض/استبعاد)، يتم حفظ المرشح تلقائياً في **قاعدة البيانات المحفوظة**
- يمكن مراجعة البيانات المحفوظة في صفحة **قاعدة البيانات**

### الخطوة 5: إدارة المقابلات (للمدراء فقط)

1. انتقل إلى **المقابلات**
2. اضغط **جدولة مقابلة**
3. اختر المرشح
4. حدد التاريخ والوقت
5. حدد نوع المقابلة (فيديو/هاتف/حضوري)
6. أضف ملاحظات
7. اضغط **حفظ**

---

## 🔍 البحث والفلترة

### في صفحة المرشحين:
- البحث بالاسم أو الرقم القومي
- الفلترة حسب الحالة (جديد، قيد المراجعة، تم التوظيف، مرفوض)

### في قاعدة البيانات:
- البحث الحر في جميع الحقول
- الفلترة حسب النتيجة (مقبول/مرفوض/مستبعد)
- الفلترة حسب الشركة
- التصدير إلى Excel

---

## 📊 التقارير والإحصائيات

### صفحة لوحة التحكم (Dashboard)
- إجمالي المرشحين
- المقابلات المجدولة
- المقابلات المكتملة
- المرشحين المقبولين
- المرشحين المرفوضين

### صفحة التقارير (Analytics)
- توزيع المرشحين حسب المحافظة
- توزيع حسب المؤهل
- نسبة النجاح/الرفض
- مخططات تفاعلية

---

## 🗄️ قاعدة البيانات المحفوظة

### الصلاحيات:
- **مدير المقابلات**: عرض فقط
- **مدير النظام**: عرض + حذف + تعديل

### البيانات المحفوظة:
- الاسم والرقم القومي
- المحافظة والمؤهل
- اسم الشركة
- **الوظيفة** (جديد)
- النتيجة النهائية
- تاريخ القرار
- قرار من
- **الملاحظات** (جديد)
- حالة سابقة (مرفوض سابقاً / جديد)

### الإجراءات المتاحة:
- ✅ البحث والفلترة
- ✅ التصدير إلى Excel
- ✅ استبعاد/استقالة (للمدير فقط)
- ✅ حذف البيانات المكررة (للمدير فقط)
- ✅ حذف السجلات (للمدير فقط)

---

## 🔔 الإشعارات

### أنواع الإشعارات:
1. **مرشح مرفوض recurrent**: إذا كان المرشح مرفوض من قبل
   - يظهر تحذير ⚠️ بجانب الاسم
   - إشعار في صفحة قاعدة البيانات
   - تاريخ الرفض السابق

2. **قرار جديد**: عند اتخاذ قرار نهائي

3. **إضافة مرشح جديد**: إشعار للمدراء

---

## ⚙️ الإعدادات

### إدارة المستخدمين (Admin only)
- إضافة مستخدم جديد
- تعديل نوع المستخدم (دور)
- عرض المستخدمين الحاليين
- **التاريخ الميلادي**: يعرض تاريخ إنشاء الحساب

### الإعدادات العامة
- معلومات النظام
- النسخة: 2.0.0
- آخر تحديث
- حالة الاتصال

---

## 📈 الميزات الجديدة في الإصدار 2.0

### ✅ حقل الوظيفة (Position)
- متوفر في صفحة المرشحين
- متوفر في رفع Excel
- متوفر في قاعدة البيانات المحفوظة
- قابل للتصدير

### ✅ حقل الملاحظات (Notes)
- متوفر عند إدخال المرشح
- متوفر عند اتخاذ القرار
- متوفر في قاعدة البيانات المحفوظة
- قابل للتصدير

### ✅ التصدير المحسّن
- يتضمن الوظيفة والملاحظات
- صيغة CSV داعمة للعربية
- تنسيق منظم

---

## 🆘 حل المشاكل

### المشكلة 1: الخطأ "العمود مفقود" عند رفع Excel
**الحل:**
- تأكد من أن أسماء الأعمدة صحيحة 100%
- راجع دليل `Excel_Upload_Guide.md`

### المشكلة 2: التواريخ لا تظهر بشكل صحيح
**الحل:**
- استخدم تنسيق `DD-MM-YYYY` (مثل: 01-01-1990)
- استخدم شرطة (-) وليس شرطة مائلة (/)

### المشكلة 3: الرقم القومي مكرر
**الحل:**
- كل مرشح يجب أن يكون له رقم قومي فريد
- لا يمكن تكرار الأرقام

### المشكلة 4: لا يمكنني اتخاذ قرار
**الحل:**
- تأكد من أنك مسجل كـ Interview Manager أو Admin
- تأكد من تسجيل الخروج وإعادة تسجيل الدخول

---

## 💡 نصائح سريعة

### 1. استخدم القوالب
- أنشئ قالب Excel لإدخال البيانات بسرعة
- احفظه واستخدمه لكل رفع

### 2. راجع قبل الحفظ
- استخدم المعاينة قبل الرفع
- تأكد من صحة البيانات

### 3. النسخ الاحتياطي
- قم بتصدير البيانات بشكل دوري
- احتفظ بنسخة من قاعدة البيانات

### 4. التعاون
- موظف الأمن: إدخال البيانات
- مدير المقابلات: اتخاذ القرارات
- Admin: الإشراف العام

---

## 📞 الدعم

إذا واجهت أي مشاكل:
1. راجع دليل `Excel_Upload_Guide.md` للتفاصيل الفنية
2. تحقق من إعدادات Supabase
3. راجع ملف `README.md` للمعلومات الأساسية

---

**آخر تحديث**: ديسمبر 2024  
**الإصدار**: 2.0.0  
**المطور**: Ahmed Hussein - Security Coordinator

